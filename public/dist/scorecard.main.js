!function(s){function t(e){if(a[e])return a[e].exports;var n=a[e]={exports:{},id:e,loaded:!1};return s[e].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=s,t.c=a,t.p="",t(0)}([function(s,t,a){"use strict";var e=(a(1),a(2),a(3),a(4),a(5),a(10),a(6),a(7),a(8),a(11),a(12),a(21)),n=a(26),l=a(27),o=a(28),i=a(29),c=a(30),r=a(31),p=a(32),d=a(19),u=a(16),m=a(18);flatpickr("#flatpickr",{enableTime:!0,allowInput:!0}),$("#road-dropdown, #home-dropdown").on("change",d.teamSelect),$(".save-notes").on("click",r.saveNotes),$(".submit-scorecard").on("click",c.submitScorecard),$(".save-to-local-disk").on("click",e.saveToLocalDisk),$(".lock-unlock-scorecard").on("click",p.lockUnlockCard),$(".reset-scorecard").on("click",i.resetScorecard),$(".edit-scorecard").on("click",m.editScorecard),$.get("/players",o.getPlayers),localforage.getItem("ashi-data-store",n.getLocalSavedGames),(0,l.toastrSetOptions)(),u.toasts.selectPlayers(),toastr.options.positionClass="toast-top-center"},function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.blankTemplate="\n <table class='<%=location%>-playersTable blank-table'>\n  <thead>\n  <tr>\n    <th class='select-player'></th>\n    <th class='player-number-blank'><bold>#</bold></th>\n    <th class='name'><bold>Player</bold></th>\n    <th><bold>G</bold></th>\n    <th><bold>A</bold></th>\n    <th><bold>P</bold></th>\n    <th><bold>+-</bold></th>\n    <th><bold>PIM</bold></th>\n    <th><bold>PPG</bold></th>\n    <th><bold>SHG</bold></th>\n    <th><bold>GWG</bold></th>\n    <th><bold>OTG</bold></th>\n    <th><bold>SOG</bold></th>\n    <th><bold>SOM</bold></th>\n  </tr>\n  </thead>\n  <tbody>\n  <% _.each([0,0,0,0,0,0,0,0,0,0,0], function(player) { %>\n      <tr class='not-playing'>\n        <td class=\"select-player\"><input type=\"checkbox\" class='blank-scorecard'></td>\n        <td class='player-number-blank'><input type='text' class='blank-scorecard blank-number-input' maxlength=\"2\" size=\"2\"></td>\n        <td class='player-name-blank'><input type='text' class='blank-scorecard blank-name-input' maxlength='30'></td>\n        <td class='goals'><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td class='assists'><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td class='points'>0   </td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n        <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      </tr>\n  <% }) %>\n  </tbody>\n  </table>\n  <table class='<%=location%>-goaliesTable blank-table'>\n  <thead>\n  <tr>\n    <th class='select-player'></th>\n    <th class='goalie-number'><bold>#</bold></th>\n    <th class='name goalie-name-blank'><bold>Goal tender</bold></th>\n    <th><bold>MIN</bold></th>\n    <th><bold>SA</bold></th>\n    <th><bold>SV</bold></th>\n    <th><bold>GA</bold></th>\n    <th><bold>SO</bold></th>\n    <th><bold>G</bold></th>\n    <th><bold>A</bold></th>\n    <th><bold>P</bold></th>\n    <th><bold>PIM</bold></th>\n    <th><bold>SOSh</bold></th>\n    <th><bold>SOSa</bold></th>\n  </tr>\n  </thead>\n  <tbody>\n  <% _.each([0,0,0], function(goalie) { %>\n    <tr class='not-playing'>\n      <td class =\"select-player\"><input type=\"checkbox\" class='blank-scorecard'></td>\n      <td class ='player-number-blank'><input type='text' class='blank-scorecard blank-number-input' maxlength=\"2\" size = \"2\"></td>\n      <td><input class='blank-scorecard blank-name-input' type='text' maxlength='30'></td>\n      <td><select class='goalie-opp-min-dropdown minutes'></select></td>\n      <td class='shots-against'><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td class='saves'><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td class='goals-against'>0</td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n      <td><span class='minus'>-</span><span class='num'>0</span><span class='plus'>+</span></td>\n    </tr>\n  <% }) %>\n  </tbody>\n  </table>\n  <div class=\"row\">\n  <div class=\"col-sm-6\">\n  \t<table class=\"<%=location%>-team-stats\">\n      <thead>\n  \t\t\t<tr>\n  \t\t\t\t<th ><div class='team-stats-header-blank'><bold>Team Stats</bold></div></th>\n          <th><bold>1st</bold></th>\n          <th><bold>2nd</bold></th>\n          <th><bold>3rd</bold></th>\n  \t\t\t\t<th><bold>OT</bold></th>\n  \t\t\t\t<th><bold>OT2</bold></th>\n          <th><bold>OT3</bold></th>\n          <th><bold>GF</bold></th>\n          <th><bold>PPG</bold></th>\n          <th><bold>PPO</bold></th>\n  \t\t\t</tr>\n      </thead>\n      <tbody>\n  \t\t\t<tr class='playing'>\n          <td ><div class='team-stats-header-blank'></div></td>\n  \t\t\t\t<td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n  \t\t\t\t<td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n  \t\t\t\t<td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n  \t\t\t</tr>\n      </tbody>\n  \t</table>\n  </div>\n  <div class=\"col-sm-6\"></div>\n  </div>"},function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.goaliesTemplate="\n  <table class='<%=location%>-goaliesTable'>\n    <thead>\n      <tr>\n        <th class='select-player'></th>\n        <th class='goalie-number'><bold>#</bold></th>\n        <th class='name'><bold>Goal tender</bold></th>\n        <th><bold>MIN</bold></th>\n        <th><bold>SA</bold></th>\n        <th><bold>SV</bold></th>\n        <th><bold>GA</bold></th>\n        <th><bold>SO</bold></th>\n        <th><bold>G</bold></th>\n        <th><bold>A</bold></th>\n        <th><bold>P</bold></th>\n        <th><bold>PIM</bold></th>\n        <th><bold>SOSh</bold></th>\n        <th><bold>SOSa</bold></th>\n      </tr>\n    </thead>\n    <tbody>\n    <% _.each(goalies, function(goalie) { %>\n      <tr class=\"playing\">\n        <td class=\"select-player\"><input type=\"checkbox\" checked></td>\n        <td class='goalie-number'><%=goalie.team.jersey_number%></td>\n        <td class='name'><%=goalie.lastname%></td>\n        <td><select class='goalie-min-dropdown minutes'></select></td>\n        <td class='shots-against'><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td class='saves'><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td class='goals-against'>0</td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n      </tr>\n    <% }) %>\n    </tbody>\n  </table>"},function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.playersTemplate="\n  <table class='<%=location%>-playersTable' id='ashi-team'>\n    <thead>\n    <tr>\n      <th class='select-player'></th>\n      <th class='player-number'><bold>#</bold></th>\n      <th class='name'><bold>Player</bold></th>\n      <th><bold>G</bold></th>\n      <th><bold>A</bold></th>\n      <th><bold>P</bold></th>\n      <th><bold>+-</bold></th>\n      <th><bold>PIM</bold></th>\n      <th><bold>PPG</bold></th>\n      <th><bold>SHG</bold></th>\n      <th><bold>GWG</bold></th>\n      <th><bold>OTG</bold></th>\n      <th><bold>SOG</bold></th>\n      <th><bold>SOM</bold></th>\n    </tr>\n    </thead>\n    <tbody>\n    <% _.each(default_players, function(player) { %>\n        <tr class=\"playing\">\n          <td class=\"select-player\"><input type=\"checkbox\" checked></td>\n          <td class='player-number'><%=player.team.jersey_number%></td>\n          <td class='name'><%=player.lastname%></td>\n          <td class='goals'><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td class='assists'><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td class='points'>0</td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n          <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n        </tr>\n    <% }) %>\n    </tbody>\n  </table>"},function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.teamTemplate="<div class=\"row\">\n                \t\t\t<div class=\"col-sm-6\">\n                \t\t\t\t<table class=\"<%=location%>-team-stats\">\n                          <thead>\n                  \t\t\t<tr>\n                  \t\t\t    <th ><div class='team-stats-header'><bold>Team Stats</bold></div></th>\n                                <th><bold>1st</bold></th>\n                                <th><bold>2nd</bold></th>\n                                <th><bold>3rd</bold></th>\n                  \t\t\t\t<th><bold>OT</bold></th>\n                  \t\t\t\t<th><bold>OT2</bold></th>\n                  \t\t\t\t<th><bold>OT3</bold></th>\n                                <th><bold>GF</bold></th>\n                                <th><bold>PPG</bold></th>\n                                <th><bold>PPO</bold></th>\n                  \t\t\t</tr>\n                          </thead>\n                          <tbody>\n                  \t\t\t<tr class='playing'>\n                              <td ><div class='team-stats-header'></div></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                  \t\t\t  <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                  \t\t\t  <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                  \t\t\t  <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                              <td><span class='minus active'>-</span><span class='num'>0</span><span class='plus active'>+</span></td>\n                  \t\t\t</tr>\n                          </tbody>\n                \t\t\t\t</table>\n                \t\t\t</div>\n                \t\t\t<div class=\"col-sm-6\"></div>\n                \t\t</div>"},function(s,t,a){"use strict";function e(s,t,a){var e,d,u,m=[],h=[];for(e=0;e<a.length;e++)d=a[e],u=d.team.position,u.indexOf("Goalie")!=-1&&h.push(d),(u.indexOf("Goalie")==-1||u.length>1)&&m.push(d);var b=_.template(c.playersTemplate)({default_players:m,location:s});$("."+s).html(b);var v=_.template(r.goaliesTemplate)({goalies:h,location:s});for($("."+s).append(v),e=0;e<=60;e++)$(".goalie-min-dropdown").append($("<option></option>").val(e).html(e));var g=_.template(p.teamTemplate)({location:s});$("."+s).append(g),$(".minus, .plus, :checkbox, .goals, .assists").off(),$(".goals, .assists").change(i.updatePlayerPoints),$(".plus").on("click",n.plus),$(".minus").on("click",l.minus),$(":checkbox").change(o.checkbox)}Object.defineProperty(t,"__esModule",{value:!0}),t.displayAshiTeam=e;var n=a(6),l=a(7),o=a(8),i=a(9),c=a(3),r=a(2),p=a(4)},function(s,t){"use strict";function a(){var s;if("plus active"===$(this).attr("class"))return s=Number($(this).prev().text())+1,$(this).prev().text(s),$(this).parent().hasClass("goals")||$(this).parent().hasClass("assists")?(s=Number($(this).parent().siblings(".points").text())+1,void $(this).parent().siblings(".points").text(s)):$(this).parent().hasClass("shots-against")?(console.log("effe"),s=Number($(this).parent().siblings(".goals-against").text())+1,void $(this).parent().siblings(".goals-against").text(s)):$(this).parent().hasClass("saves")?(s=Number($(this).parent().siblings(".goals-against").text())-1,void $(this).parent().siblings(".goals-against").text(s)):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.plus=a},function(s,t){"use strict";function a(){if("minus active"===$(this).attr("class")){var s=Number($(this).next().text())-1;if(s>=0){if($(this).next().text(s),s=Number($(this).siblings(".points").text())-1,$(this).siblings(".points").text(s),$(this).parent().hasClass("goals")||$(this).parent().hasClass("assists"))return s=Number($(this).parent().siblings(".points").text())-1,void $(this).parent().siblings(".points").text(s);if($(this).parent().hasClass("shots-against"))return s=Number($(this).parent().siblings(".goals-against").text())-1,void $(this).parent().siblings(".goals-against").text(s);if($(this).parent().hasClass("saves"))return s=Number($(this).parent().siblings(".goals-against").text())+1,void $(this).parent().siblings(".goals-against").text(s)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.minus=a},function(s,t){"use strict";function a(){$(this).parents("tr").toggleClass("playing").toggleClass("not-playing"),$(this).parent("td").siblings("td").children(".minus, .plus").toggleClass("active")}Object.defineProperty(t,"__esModule",{value:!0}),t.checkbox=a},function(s,t){"use strict";function a(){console.log("update player points")}Object.defineProperty(t,"__esModule",{value:!0}),t.updatePlayerPoints=a},function(s,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.savedGamesTemplate="\n    <h2 class='saved-games-header'>Games saved on local drive</h2>\n    <% _.each(savedgames, function(g) { %>\n      <% if (g.home_game === 'true'){ %>\n        <% homeTeam = g.team_name; %>\n        <% roadTeam = g.opponent;%>\n      <% } else { %>\n        <% homeTeam = g.opponent; %>\n        <% roadTeam = g.team_name; %>\n      <% } %>\n        <div class='row saved-game'>\n            <div class='col-sm-3'>\n                <p class='game'><%=homeTeam%> - <%=roadTeam%>&nbsp; &nbsp; <%=g.date%>&nbsp; &nbsp; <%=g.time%></p>\n            </div>\n            <div class='col-sm-9'>\n                <button type='submit' class='edit-scorecard btn btn-sm btn-primary'>Edit</button>\n                <button type='submit' class='send-to-server btn btn-sm btn-primary'>Send to ASHI server</button>\n                <button type='submit' class='delete-game btn btn-sm btn-danger'>Delete from local drive</button>\n                <span class='game-details'><%=g.team_name%>,<%=g.opponent%>,<%=g.date%>,<%=g.time%></span>\n            </div>\n        </div>\n    <% }) %>"},function(s,t,a){"use strict";function e(s){var t,a=_.template(n.blankTemplate)({location:s});for($("."+s).html(a),t=0;t<=60;t++)$(".goalie-opp-min-dropdown").append($("<option></option>").val(t).html(t));$(".minus, .plus, :checkbox").off(),$(".plus").on("click",l.plus),$(".minus").on("click",o.minus),$(":checkbox").change(i.checkbox)}Object.defineProperty(t,"__esModule",{value:!0}),t.displayBlankTeam=e;var n=a(1),l=a(6),o=a(7),i=a(8)},function(s,t,a){"use strict";function e(s){$(".send-to-server, .delete-game, .edit-scorcard").off(),$(".saved-games").empty();var t=_.template(i.savedGamesTemplate)({savedgames:s});$(".saved-games").html(t),$(".send-to-server").on("click",n.sendToServer),$(".delete-game").on("click",l.deleteGame),$(".edit-scorecard").on("click",o.editScorecard)}Object.defineProperty(t,"__esModule",{value:!0}),t.displaySavedGames=e;var n=a(13),l=a(17),o=a(18),i=a(10)},function(s,t,a){"use strict";function e(){var s=$(this).siblings("span").text().split(",");(0,n.sendSavedGame)(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.sendToServer=e;var n=a(14)},function(s,t,a){"use strict";function e(s){localforage.getItem("ashi-data-store",function(t,a){for(var e=0;e<a.length;e++)a[e].team_name===s[0]&&a[e].opponent===s[1]&&a[e].date===s[2]&&a[e].time===s[3]&&$.ajax({type:"POST",url:"http://127.0.0.1:3000/scorecard",error:function(){l.toasts.noServerResponse()},success:function(t){"Game not stored"===t&&l.toasts.notStoredInDb(),"Game stored"===t&&(l.toasts.storedInDb(),(0,n.deleteSavedGame)(s))},data:{stats:a[e]},timeout:3e3})})}Object.defineProperty(t,"__esModule",{value:!0}),t.sendSavedGame=e;var n=a(15),l=a(16)},function(s,t,a){"use strict";function e(s){localforage.getItem("ashi-data-store",function(t,a){for(var e=0;e<a.length;e++)a[e].team_name===s[0]&&a[e].opponent===s[1]&&a[e].date===s[2]&&a[e].time===s[3]&&(a.splice(e,1),localforage.removeItem("ashi-data-store",function(s){0!==a.length?localforage.setItem("ashi-data-store",a,function(s){(0,n.displaySavedGames)(a)}):$(".saved-games").empty()}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSavedGame=e;var n=a(12)},function(s,t,a){"use strict";function e(){toastr.info("Make sure that only players and goalies who are playing have their checkbox\n               (to the left of jersey number) checked",'Use the score card in "Safe mode" (green button on right-hand side) after you have configured it.')}function n(){toastr.warning("Wipe the scorecard clean?<br /><br /><button type='button'\n  class='reset-card btn btn-danger'>Yes</button>")}function l(){toastr.error("Game not stored in database, please try again")}function o(){toastr.success("Game stored in database")}function i(){toastr.error("Set game date and time before submitting scorecard")}function c(){toastr.error("Fill out jersey number and name for all opponent players and goalies")}function r(){toastr.error("Fill out opponent team name")}function p(){toastr.error("Shots Against stat can't be 0")}function d(){toastr.error("select all players and goalies who played")}function u(){toastr.warning("If your browser is in 'private browser mode'\n                  and/or doesn't store browsing history you can't\n                  save games to your local drive")}function m(s){toastr.warning("Delete game on local drive?<br /><br /><button type='button' class='confirm-delete-game btn btn-danger'>Yes</button>"),$(".confirm-delete-game").on("click",function(){(0,v.deleteSavedGame)(s)})}function h(){toastr.warning("the number of minutes a goalie has played should be greater than 0")}function b(){toastr.warning("No response from the ASHI server. Please try to submit later again.")}Object.defineProperty(t,"__esModule",{value:!0}),t.toasts=void 0;var v=a(15);t.toasts={selectPlayers:e,resetScorecard:n,notStoredInDb:l,storedInDb:o,fillOutBlank:c,setDateTime:i,opponentName:r,shotsAgainst:p,tickBoxes:d,privateBrowserMode:u,confirmDeleteGame:m,goalieMinutes:h,noServerResponse:b}},function(s,t,a){"use strict";function e(){$(".confirm-delete-game").off();var s=$(this).siblings(".game-details").text().split(",");n.toasts.confirmDeleteGame(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteGame=e;var n=a(16)},function(s,t,a){"use strict";function e(){var s=!0,t=$(this).siblings(".game-details").text().split(",");localforage.getItem("ashi-data-store",function(a,e){for(var o=0;o<e.length;o++)if(e[o].team_name===t[0]&&e[o].opponent===t[1]&&e[o].date===t[2]&&e[o].time===t[3]){var i=e[o],c="true"===i.home_game,r=c?"home":"road",p=c?"road":"home";$("#flatpickr").val(i.date+" "+i.time);var d=c?"#home-dropdown":"#road-dropdown",u=c?"#road-dropdown":"#home-dropdown";$("select"+d+" option").filter(function(){return $(this).text()===i.team_name}).prop("selected",!0),$("select"+u+" option").filter(function(){return"blank scorecard"===$(this).text()}).prop("selected",!0),(0,l.teamSelect)(p,i.opponent,s,i,!0),(0,l.teamSelect)(r,i.team_name,s,i,!1),(0,n.deleteSavedGame)(t)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.editScorecard=e;var n=a(15),l=a(19)},function(s,t,a){"use strict";function e(s,t,a,e,r){var p,d,u,m,h,b,v=this;if(a)$("textarea").val(""),$("textarea").val(e.gameNotes),p=$("#home-dropdown").val(),d=$("#road-dropdown").val(),u=r?"blank scorecard":t,m=s,"home"===m?(p=i,i=u):(d=c,c=u),r||(h=s,b="home"===h?"road":"home");else{if(u=this.value,""===u)return;m=$(this).attr("id").replace("-dropdown",""),"home"===m?(p=i,i=u):(d=c,c=u)}if("blank scorecard"===u)return $("."+m+"-team-name").text(m+" team:"),$("."+m+"-name-input").html('<input type="text" maxlength="30" class="team-name-input">'),$("."+m+"-name-input").children().val(t),$("."+m+"-team-name").css({display:"inline-block","margin-left":"13.5em"}),(0,n.displayBlankTeam)(m),void $("#"+m+"-dropdown").css("margin-bottom","-1.15em");$("."+m+"-name-input").empty();var g="home"===m;$(".home-game").text(g),("home"===m&&"blank scorecard"===p||"road"===m&&"blank scorecard"===d)&&$("."+m).css("margin-top","1.5em"),$("."+m+"-name-input").children().hide(),localforage.getItem("teamData",function(s,n){if(a)var i=n.filter(function(s){return s.name===t})[0];else var i=n.filter(function(s){return s.key===$(v).val()})[0];$("."+m+"-team-name").html(m+" team: "+i.name),$(".ashi-team-name").text(i.name);var c=i.players;(0,l.displayAshiTeam)(m,i,c),a&&((0,o.fillOutScorecard)("."+h+"-playersTable",e.ashi_players),(0,o.fillOutScorecard)("."+h+"-goaliesTable",e.ashi_goalies),(0,o.fillOutScorecard)("."+h+"-team-stats",e.ashi_team),(0,o.fillOutScorecard)("."+b+"-playersTable",e.opponent_players),(0,o.fillOutScorecard)("."+b+"-goaliesTable",e.opponent_goalies),(0,o.fillOutScorecard)("."+b+"-team-stats",e.opponent_team))})}Object.defineProperty(t,"__esModule",{value:!0}),t.teamSelect=e;var n=a(11),l=a(5),o=a(20),i=(a(16),"Select Home team"),c="Select Road team"},function(s,t){"use strict";function a(s,t){$(s).find("> tbody tr").each(function(){var a,e,n=[];0!==t.length&&(".home-team-stats"!==s&&".road-team-stats"!==s||(n=t.stats_for_editing),a=$(this).find("td"),$.each(a,function(a){var l=this;return 1!==a||".home-team-stats"===s||".road-team-stats"===s||$(s).hasClass("blank-table")?1===a&&$(s).hasClass("blank-table")?($(this).children().val(t[0].jersey_number),$(this).prev().children().prop("checked",!0),$(this).parents("tr").toggleClass("playing").toggleClass("not-playing"),void $(this).siblings("td").children(".minus, .plus").toggleClass("active")):2===a&&$(s).hasClass("blank-table")?($(this).children().val(t[0].name),n=t[0].stats_for_editing,void t.shift()):1!==a&&2!==a||".home-team-stats"!==s&&".road-team-stats"!==s?3===a&&n.length>0&&(".home-goaliesTable"===s||".road-goaliesTable"===s)?($(this).children().val(n[0]),void n.shift()):a>2&&n.length>0?($(this).children(".num").text(n[0]),void n.shift()):void 0:($(this).children(".num").text(n[0]),void n.shift()):(e=$(this).text(),void t.map(function(s){s.jersey_number===e&&(n=s.stats_for_editing,$(l).prev().children().prop("checked",!0),$(l).parents("tr").toggleClass("playing").toggleClass("not-playing"),$(l).siblings("td").children(".minus, .plus").toggleClass("active"))}))}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.fillOutScorecard=a},function(s,t,a){"use strict";function e(){var s,t=(0,l.collectGameStats)();"error"!==t&&localforage.getItem("ashi-data-store",function(a,e){if(s=e,null===e)return localforage.setItem("ashi-data-store",[t],function(s){console.log(s)}),void(0,n.displaySavedGames)([t]);for(var l=0;l<e.length;l++)if(_.isEqual(e[l],t))return;s.push(t),localforage.removeItem("ashi-data-store",function(s){console.log(s)}),localforage.setItem("ashi-data-store",s,function(s){console.log(s)}),(0,n.displaySavedGames)(s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.saveToLocalDisk=e;var n=a(12),l=a(22)},function(s,t,a){"use strict";function e(){var s=$(".ashi-team-name").text(),t=$(".team-name-input").val(),a=$(".home-game").text();if("true"===a&&$("div.road-name-input").is(":empty")){var e=$(".road-team-name").text();t=e.slice(e.indexOf(": ")+2)}if("false"===a&&$("div.home-name-input").is(":empty")){var e=$(".home-team-name").text();t=e.slice(e.indexOf(": ")+2)}console.log("opponent: ",t);var c,r,p,d,u,m,h,b,v,g,f=!1;if(""===$("#flatpickr").val())return i.toasts.setDateTime(),"error";c=$("#flatpickr").val().split(" ")[0],r=c.substr(0,4);var y=$("#flatpickr").val().split(" ")[1];if(""===$(".team-name-input").val())return i.toasts.opponentName(),"error";var _=[".home-playersTable",".home-goaliesTable",".home-team-stats"].map(n.getStats),S=[".road-playersTable",".road-goaliesTable",".road-team-stats"].map(n.getStats);if(_.map(function(s){"incomplete"===s[0]&&(f=!0)}),S.map(function(s){"incomplete"===s[0]&&(f=!0)}),f)return i.toasts.fillOutBlank(),"error";if("true"===a?(p=_[0],d=_[1],u=_[2],m=S[0],h=S[1],b=S[2]):(m=_[0],h=_[1],b=_[2],p=S[0],d=S[1],u=S[2]),u[7]>b[7]&&(v="win",g="loss"),u[7]===b[7]&&(v=g="tie"),u[7]<b[7]&&(v="loss",g="win"),0===d[3]||0===h[3])return i.toasts.goalieMinutes(),"error";var P=b[9]>0?(b[9]-b[8])/b[9]:-999,k=u[9]>0?(u[9]-u[8])/u[9]:-999,O=u[9]>0?u[8]/u[9]:-999,x=b[9]>0?b[8]/b[9]:-999,G=(0,l.getPlayerStats)(p,t,a,v,c,r,s),T=(0,o.getGoalieStats)(d,t,a,v,c,r,s),M={P1_goals:u[1],P2_goals:u[2],P3_goals:u[3],OT:u[4],OT2:u[5],OT3:u[6],GF:u[7],GA:b[7],PPG:u[8],PPO:u[9],PKP:P,result:v,date:c,home_game:a,opponent:t,season:r,team_name:s,PPP:O,stats_for_editing:[u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9]]},j=(0,l.getPlayerStats)(m,s,!a,g,c,r,s),w=(0,o.getGoalieStats)(h,s,!a,g,c,r,s),I={P1_goals:b[1],P2_goals:b[2],P3_goals:b[3],OT:b[4],OT2:b[5],OT3:b[6],GF:b[7],GA:u[7],PPG:b[8],PPO:b[9],PKP:k,PPP:x,result:g,date:c,home_game:!a,opponent:s,season:r,stats_for_editing:[b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]]},C={team_name:s,home_game:a,opponent:t,date:c,time:y,ashi_players:G,ashi_goalies:T,ashi_team:M,opponent_players:j,opponent_goalies:w,opponent_team:I,season:r};return localforage.getItem("ashi-game-notes",function(s,t){C.gameNotes=t}),localforage.removeItem("ashi-game-notes",function(s){console.log(s)}),0===G.length||0===T.length||0===j.length||0===w.length?(i.toasts.tickBoxes(),"error"):C}Object.defineProperty(t,"__esModule",{value:!0}),t.collectGameStats=e;var n=a(23),l=a(24),o=a(25),i=a(16)},function(s,t){"use strict";function a(s){var t,a=!1,e=[];return $(s).find("> tbody tr.playing").each(function(){var n;t=$(this).find("td"),$.each(t,function(t){return 3!==t||".home-goaliesTable"!==s&&".road-goaliesTable"!==s?1!==t&&2!==t||!$(s).hasClass("blank-table")?(n=$(this).text(),1!==t&&2!==t||".home-team-stats"===s||".road-team-stats"===s?".home-team-stats"===s||".road-team-stats"===s?(n=t>0?+n.replace(/[-+]/g,""):n,void e.push(n)):(n=t>2?+n.replace(/[-+]/g,""):n,void e.push(n)):void e.push(n)):(n=$(this).children().val(),e.push(n),void(""===n&&(a=!0))):(n=$(this).children().val(),void e.push(parseInt(n,10)))})}),a?["incomplete"]:e}Object.defineProperty(t,"__esModule",{value:!0}),t.getStats=a},function(s,t){"use strict";function a(s,t,a,e,n,l,o){for(var i=[];s.length>0;){var c={jersey_number:String(s[1]),name:s[2],G:s[3],A:s[4],P:s[5],PM:s[6],PIM:s[7],PPG:s[8],SHG:s[9],GWG:s[10],OTG:s[11],SOG:s[12],SOM:s[13],result:e,opponent:t,date:n,season:l,home_game:a,team_name:o,stats_for_editing:[s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13]]};i.push(c),s=s.slice(14)}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayerStats=a},function(s,t){"use strict";function a(s,t,a,e,n,l,o){for(var i=[];s.length>0;){var c={jersey_number:String(s[1]),name:s[2],MIN:s[3],SA:s[4],SV:s[5],GA:s[6],SO:s[7],G:s[8],A:s[9],P:s[10],PIM:s[11],SOSh:s[12],SOSa:s[13],result:e,opponent:t,date:n,season:l,home_game:a,team_name:o,stats_for_editing:[s[3],s[4],s[5],s[6],s[7],s[8],s[9],s[10],s[11],s[12],s[13]]};i.push(c),s=s.slice(14)}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getGoalieStats=a},function(s,t,a){"use strict";function e(s,t){return s?void n.toasts.privateBrowserMode():void(null!==t&&(0,l.displaySavedGames)(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalSavedGames=e;var n=a(16),l=a(12)},function(s,t){"use strict";function a(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function e(){var s;toastr.options=(s={preventDuplicates:!0,closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-full-width"},a(s,"preventDuplicates",!1),a(s,"onclick",null),a(s,"showDuration","300"),a(s,"hideDuration","1000"),a(s,"timeOut","9999999999"),a(s,"extendedTimeOut","9999999999"),a(s,"showEasing","swing"),a(s,"hideEasing","linear"),a(s,"showMethod","fadeIn"),a(s,"hideMethod","fadeOut"),s)}Object.defineProperty(t,"__esModule",{value:!0}),t.toastrSetOptions=e},function(s,t){"use strict";function a(s){
localforage.removeItem("teamData"),localforage.setItem("teamData",s,function(s){console.log(s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPlayers=a},function(s,t,a){"use strict";function e(){$(".reset-card").off(),n.toasts.resetScorecard(),$(".reset-card").on("click",function(){toastr.remove(),$("#flatpickr").val("").attr("placeholder","Set game date and time"),$("#home-dropdown").val("").attr("placeholder","Select Home team"),$("#road-dropdown").val("").attr("placeholder","Select Road team"),$(".home-team-name, .road-team-name, .home-name-input, .road-name-input, .home, .road").empty(),$("textarea").val("")})}Object.defineProperty(t,"__esModule",{value:!0}),t.resetScorecard=e;var n=a(16)},function(s,t,a){"use strict";function e(){var s=(0,l.collectGameStats)();"error"!==s&&$.post("/scorecard",{stats:s},function(s){"Game not stored"===s&&n.toasts.notStoredInDb(),"Game stored"===s&&n.toasts.storedInDb()})}Object.defineProperty(t,"__esModule",{value:!0}),t.submitScorecard=e;var n=a(16),l=a(22)},function(s,t){"use strict";function a(){localforage.removeItem("ashi-game-notes"),localforage.setItem("ashi-game-notes",$("textarea").val(),function(s){console.log(s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.saveNotes=a},function(s,t){"use strict";function a(){"Safe mode"===$(this).text()?($(".controls").hide(),$(this).text("Leave safe mode"),$(this).css("background-color","red")):($(".controls").show(),$(this).text("Safe mode"),$(this).css("background-color","green"))}Object.defineProperty(t,"__esModule",{value:!0}),t.lockUnlockCard=a}]);